#!/usr/bin/env ruby

require 'json'
require_relative '../lib/search_parser'

DEAFAULT_PATH = 'files/van-gogh-paintings.html'

def main
  if ARGV.length == 0 then
    puts 'path is not provided, use deafult path'
    ARGV[0] = DEAFAULT_PATH
  end

  parse ARGV[0].to_str
  return
end

def parse path
  parser = SearchParser.new File.read(path)
  result = parser.parse

  puts JSON.pretty_generate(result)
  return
end

main()
